<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1106px" preserveAspectRatio="none" style="width:1830px;height:1106px;background:#FFFFFF;" version="1.1" viewBox="0 0 1830 1106" width="1830px" zoomAndPan="magnify"><title>Price Update Flow - Scheduled Job Execution</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="555.6611" x="638.2993" y="37.1182">Price Update Flow - Scheduled Job Execution</text><rect fill="#FFFFFF" height="967.144" style="stroke:#000000;stroke-width:1;" width="10" x="56.9009" y="94.752"/><rect fill="#FFFFFF" height="754.1509" style="stroke:#000000;stroke-width:1;" width="10" x="214.5679" y="132.3506"/><rect fill="#FFFFFF" height="724.3516" style="stroke:#000000;stroke-width:1;" width="10" x="390.7612" y="162.1499"/><rect fill="#FFFFFF" height="89.3979" style="stroke:#000000;stroke-width:1;" width="10" x="580.9854" y="381.5444"/><rect fill="#FFFFFF" height="303.3618" style="stroke:#000000;stroke-width:1;" width="10" x="764.9854" y="500.7417"/><rect fill="#FFFFFF" height="160.3652" style="stroke:#000000;stroke-width:1;" width="10" x="962.1411" y="555.3403"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1131.6797" y="267.3472"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1131.6797" y="744.5049"/><rect fill="#FFFFFF" height="470.1577" style="stroke:#000000;stroke-width:1;" width="1647.6719" x="132.1621" y="341.9458"/><rect fill="#FFFFFF" height="199.9639" style="stroke:#000000;stroke-width:1;" width="807.9043" x="677.4219" y="515.7417"/><rect fill="#FFFFFF" height="92.7666" style="stroke:#000000;stroke-width:1;" width="595.5361" x="879.79" y="615.939"/><rect fill="#FFFFFF" height="45.168" style="stroke:none;stroke-width:1;" width="595.5361" x="879.79" y="663.5376"/><line style="stroke:#000000;stroke-width:1;" x1="61" x2="61" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="219.1621" x2="219.1621" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="394.9736" x2="394.9736" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="585.5488" x2="585.5488" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="769.4219" x2="769.4219" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="966.79" x2="966.79" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1136.4922" x2="1136.4922" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1414.4414" x2="1414.4414" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1534.3262" x2="1534.3262" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1686.8574" x2="1686.8574" y1="84.752" y2="1070.896"/><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.8018" x="20" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.8018" x="27" y="73.8125">Scheduler</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.8018" x="20" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.8018" x="27" y="1090.9712">Scheduler</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.8115" x="152.1621" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.8115" x="159.1621" y="73.8125">AlphaVantageJob</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.8115" x="152.1621" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.8115" x="159.1621" y="1090.9712">AlphaVantageJob</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="157.5752" x="316.9736" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="143.5752" x="323.9736" y="73.8125">JobExecutionService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="157.5752" x="316.9736" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="143.5752" x="323.9736" y="1090.9712">JobExecutionService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="162.873" x="504.5488" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="148.873" x="511.5488" y="73.8125">AlphaVantageService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="162.873" x="504.5488" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="148.873" x="511.5488" y="1090.9712">AlphaVantageService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="145.127" x="697.4219" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.127" x="704.4219" y="73.8125">DataProcessingUtil</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="145.127" x="697.4219" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.127" x="704.4219" y="1090.9712">DataProcessingUtil</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.7021" x="899.79" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.7021" x="906.79" y="73.8125">DailyPriceService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.7021" x="899.79" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.7021" x="906.79" y="1090.9712">DailyPriceService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.375" x="1064.4922" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.375" x="1071.4922" y="73.8125">InstrumentService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.375" x="1064.4922" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.375" x="1071.4922" y="1090.9712">InstrumentService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.8848" x="1375.4414" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.8848" x="1382.4414" y="73.8125">Database</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.8848" x="1375.4414" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.8848" x="1382.4414" y="1090.9712">Database</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.5313" x="1485.3262" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85.5313" x="1492.3262" y="73.8125">Redis Cache</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.5313" x="1485.3262" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85.5313" x="1492.3262" y="1090.9712">Redis Cache</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.9766" x="1614.8574" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.9766" x="1621.8574" y="73.8125">Alpha Vantage API</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.9766" x="1614.8574" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.9766" x="1621.8574" y="1090.9712">Alpha Vantage API</text><rect fill="#FFFFFF" height="967.144" style="stroke:#000000;stroke-width:1;" width="10" x="56.9009" y="94.752"/><rect fill="#FFFFFF" height="754.1509" style="stroke:#000000;stroke-width:1;" width="10" x="214.5679" y="132.3506"/><rect fill="#FFFFFF" height="724.3516" style="stroke:#000000;stroke-width:1;" width="10" x="390.7612" y="162.1499"/><rect fill="#FFFFFF" height="89.3979" style="stroke:#000000;stroke-width:1;" width="10" x="580.9854" y="381.5444"/><rect fill="#FFFFFF" height="303.3618" style="stroke:#000000;stroke-width:1;" width="10" x="764.9854" y="500.7417"/><rect fill="#FFFFFF" height="160.3652" style="stroke:#000000;stroke-width:1;" width="10" x="962.1411" y="555.3403"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1131.6797" y="267.3472"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1131.6797" y="744.5049"/><polygon fill="#000000" points="202.5679,128.3506,212.5679,132.3506,202.5679,136.3506,206.5679,132.3506" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="66.9009" x2="208.5679" y1="132.3506" y2="132.3506"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.667" x="73.9009" y="111.8218">@Scheduled trigger</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.2988" x="73.9009" y="127.6211">(every 2 hours)</text><polygon fill="#000000" points="378.7612,158.1499,388.7612,162.1499,378.7612,166.1499,382.7612,162.1499" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="224.5679" x2="384.7612" y1="162.1499" y2="162.1499"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.4434" x="231.5679" y="157.4204">executeJob(this)</text><polygon fill="#000000" points="1403.3838,203.7485,1413.3838,207.7485,1403.3838,211.7485,1407.3838,207.7485" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="400.7612" x2="1409.3838" y1="207.7485" y2="207.7485"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.1499" x="407.7612" y="187.2197">Create JobExecution record</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.3853" x="407.7612" y="203.019">(status: RUNNING)</text><polygon fill="#000000" points="235.5679,233.5479,225.5679,237.5479,235.5679,241.5479,231.5679,237.5479" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="229.5679" x2="389.7612" y1="237.5479" y2="237.5479"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.8545" x="241.5679" y="232.8184">execute()</text><polygon fill="#000000" points="1119.6797,263.3472,1129.6797,267.3472,1119.6797,271.3472,1123.6797,267.3472" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="224.5679" x2="1125.6797" y1="267.3472" y2="267.3472"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.6733" x="231.5679" y="262.6177">getAllInstruments()</text><polygon fill="#000000" points="1403.3838,293.1465,1413.3838,297.1465,1403.3838,301.1465,1407.3838,297.1465" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1141.6797" x2="1409.3838" y1="297.1465" y2="297.1465"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.5273" x="1148.6797" y="292.417">SELECT * FROM instrument</text><polygon fill="#000000" points="1147.6797,322.9458,1137.6797,326.9458,1147.6797,330.9458,1143.6797,326.9458" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1141.6797" x2="1414.3838" y1="326.9458" y2="326.9458"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="77.9746" x="1153.6797" y="322.2163">instruments</text><path d="M132.1621,341.9458 L208.5449,341.9458 L208.5449,349.7451 L198.5449,359.7451 L132.1621,359.7451 L132.1621,341.9458 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="470.1577" style="stroke:#000000;stroke-width:1;" width="1647.6719" x="132.1621" y="341.9458"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.3828" x="147.1621" y="356.0156">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="246.0015" x="223.5449" y="355.0049">[for each ALPHA_VANTAGE instrument]</text><polygon fill="#000000" points="568.9854,377.5444,578.9854,381.5444,568.9854,385.5444,572.9854,381.5444" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="224.5679" x2="574.9854" y1="381.5444" y2="381.5444"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268.2075" x="231.5679" y="376.8149">getDailyTimeSeriesForLastWeek(symbol)</text><polygon fill="#000000" points="1675.3457,407.3438,1685.3457,411.3438,1675.3457,415.3438,1679.3457,411.3438" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="590.9854" x2="1681.3457" y1="411.3438" y2="411.3438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="281.9502" x="597.9854" y="406.6143">GET /query?function=TIME_SERIES_DAILY</text><polygon fill="#000000" points="601.9854,437.1431,591.9854,441.1431,601.9854,445.1431,597.9854,441.1431" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="595.9854" x2="1686.3457" y1="441.1431" y2="441.1431"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.4634" x="607.9854" y="436.4136">JSON price data</text><polygon fill="#000000" points="235.5679,466.9424,225.5679,470.9424,235.5679,474.9424,231.5679,470.9424" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="229.5679" x2="584.9854" y1="470.9424" y2="470.9424"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216.2837" x="241.5679" y="466.2129">Map&lt;LocalDate, DailyPriceData&gt;</text><polygon fill="#000000" points="752.9854,496.7417,762.9854,500.7417,752.9854,504.7417,756.9854,500.7417" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="224.5679" x2="758.9854" y1="500.7417" y2="500.7417"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="389.6826" x="231.5679" y="496.0122">processDailyData(instrument, dailyData, ALPHA_VANTAGE)</text><path d="M677.4219,515.7417 L753.8047,515.7417 L753.8047,523.541 L743.8047,533.541 L677.4219,533.541 L677.4219,515.7417 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="199.9639" style="stroke:#000000;stroke-width:1;" width="807.9043" x="677.4219" y="515.7417"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.3828" x="692.4219" y="529.8115">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.1284" x="768.8047" y="528.8008">[for each date in dailyData]</text><polygon fill="#000000" points="950.1411,551.3403,960.1411,555.3403,950.1411,559.3403,954.1411,555.3403" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="774.9854" x2="956.1411" y1="555.3403" y2="555.3403"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.1558" x="781.9854" y="550.6108">saveDailyPrice(dailyPrice)</text><polygon fill="#000000" points="1403.3838,596.939,1413.3838,600.939,1403.3838,604.939,1407.3838,600.939" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="972.1411" x2="1409.3838" y1="600.939" y2="600.939"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.3945" x="979.1411" y="580.4102">Find existing price by</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.5024" x="979.1411" y="596.2095">(instrument_id, date, provider)</text><path d="M879.79,615.939 L943.8394,615.939 L943.8394,623.7383 L933.8394,633.7383 L879.79,633.7383 L879.79,615.939 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="92.7666" style="stroke:#000000;stroke-width:1;" width="595.5361" x="879.79" y="615.939"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="894.79" y="630.0088">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="134.981" x="958.8394" y="628.998">[existing price found]</text><polygon fill="#000000" points="1403.3838,651.5376,1413.3838,655.5376,1403.3838,659.5376,1407.3838,655.5376" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="972.1411" x2="1409.3838" y1="655.5376" y2="655.5376"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.791" x="979.1411" y="650.8081">UPDATE daily_price</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="879.79" x2="1475.3262" y1="664.5376" y2="664.5376"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114.8071" x="884.79" y="675.5967">[no existing price]</text><polygon fill="#000000" points="1403.3838,696.7056,1413.3838,700.7056,1403.3838,704.7056,1407.3838,700.7056" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="972.1411" x2="1409.3838" y1="700.7056" y2="700.7056"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.6553" x="979.1411" y="695.9761">INSERT daily_price</text><polygon fill="#000000" points="1119.6797,740.5049,1129.6797,744.5049,1119.6797,748.5049,1123.6797,744.5049" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="774.9854" x2="1125.6797" y1="744.5049" y2="744.5049"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.5498" x="781.9854" y="739.7754">Update instrument.currentPrice</text><polygon fill="#000000" points="1403.3838,770.3042,1413.3838,774.3042,1403.3838,778.3042,1407.3838,774.3042" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1141.6797" x2="1409.3838" y1="774.3042" y2="774.3042"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.7041" x="1148.6797" y="769.5747">UPDATE instrument SET current_price</text><polygon fill="#000000" points="1523.0918,800.1035,1533.0918,804.1035,1523.0918,808.1035,1527.0918,804.1035" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1136.6797" x2="1529.0918" y1="804.1035" y2="804.1035"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.333" x="1143.6797" y="799.374">EVICT instrument cache</text><polygon fill="#000000" points="378.7612,836.9028,388.7612,840.9028,378.7612,844.9028,382.7612,840.9028" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="224.5679" x2="384.7612" y1="840.9028" y2="840.9028"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.1436" x="231.5679" y="836.1733">execution complete</text><polygon fill="#000000" points="1403.3838,882.5015,1413.3838,886.5015,1403.3838,890.5015,1407.3838,886.5015" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="395.7612" x2="1409.3838" y1="886.5015" y2="886.5015"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.3223" x="402.7612" y="865.9727">Update JobExecution</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.3682" x="402.7612" y="881.772">(status: SUCCESS, end_time)</text><path d="M774,899.5015 L774,972.5015 L1147,972.5015 L1147,909.5015 L1137,899.5015 L774,899.5015 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1137,899.5015 L1137,909.5015 L1147,909.5015 L1137,899.5015 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.0459" x="780" y="917.5713">Upsert logic prevents duplicates:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="352.9614" x="780" y="933.3706">- Check if price exists for (instrument, date, provider)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.6123" x="780" y="949.1699">- Update if exists, insert if not</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="287.625" x="780" y="964.9692">- Database UNIQUE constraint as safety net</text><path d="M1540,982.6987 L1540,1055.6987 L1823,1055.6987 L1823,992.6987 L1813,982.6987 L1540,982.6987 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1813,982.6987 L1813,992.6987 L1823,992.6987 L1813,982.6987 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="227.1318" x="1546" y="1000.7686">Cache eviction ensures fresh data:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.6855" x="1546" y="1016.5679">- Instrument cache cleared on update</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="262.2598" x="1546" y="1032.3672">- Summary cache cleared on calculation</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="239.5669" x="1546" y="1048.1665">- TTL-based expiration for stale data</text><!--SRC=[VLPTZ-8s57tFhxZT9wXWLzf7r6uRCPdPh1YMJi9KbIeXurp0NHEdjiEMVzzhvyk4QNbWFFQvr-UU-s5-i2Sy8rIIYJAomag4ZHOSOLiLp28yIlKTvf3n4nQrn0A-g3qa_o2lhL1b55LCMy55nKeBxpgKVWVCWEd-kmN5iZgnLrgo8v8p3_rBxMz1TD1Vag6-4ACEk3CN_jyUGp2xt6CVc6KRhJWQ8yhZrWhfeLMpfVGOBUJLwn7whTp6lUkqD5RNPonj21Qq-pQDFJCDf1W5_uA5CB1af9y_vsxrHiZGnWpn9cq2haGKCMx5nQLkqBzVmVoJat01lmu9jLeSZwZ_B2TuGNs5Zt1IjJRJmP7BJaHVhRMBPW7eq-CoEB4dCOBxWADsuSmAkdEfqHs7gGMDNEc2xZQMsTeiu6MxNgVhfsbex1ctzqscFPLEsGKSqSPI3lgRIK2dJq2twFXaoIfPvl0ZFBvyVVQmnZegoFsD_-7CH0NUUuwaKXKSb0OwF46ysdoETw_nEe-Vaj0nqASbtzIcf-wBB1TdLsC2pQFIAsRixuZV9kPwtYivzORzjMrP-xrB5n2bVW5FIGuV_gufYxySwf8xXN_Eq-TaboKlQPBj7k9qzKTZM0aVOqVZI_PrtTGrKDkp6-TT1fvPzTDASIQfU746Gs-uOlxaJG9nMfPXp7sJBRgbz-7C9uDACsBGxivkfHpfCFIitx_DGT4aQF3bCUxJcpMKsbPUW64N76AQ5Frosfi6LtSJ873RRdNbzIZAWgfM64k3fjLsVwLI7qBTYMBccSuSguieK0UNIJisFwYwB7h0cxTkDmzndZHXx_nfZqTf44erSlh_xj8rbKx-jhk0If3tGPeE5DsfFdHM-yeCahpdjTRqTzFVTTzkRdVSp6tSWoDgxnnQPm7pqCxFrGKahocDWS2ocRUZk8PclmkuAqCVhA_r-q7fXXrNvqgYnV5WR4K81sCm4RFjSfbasSnfkRCq9gRX3Eg6xUrM59MALZJPJnRK8U08T9j1RQbTZeBJ0Grz6cjGr9KKdCpDWZ1pM9wGVmDnQ2lFrupnxJLgrN7nplkS7bghcTFENKaxHCjZklSFjklqjsr2qZYdz1l4-byEx83s2YLQfwapmd54NOxyAmb8pwsN64jJQoIYzEM706l2IKVP1IwHQNhzoARsV3qigyzdHc_W7OQc7gybyxzv733FLtF7ttLu9RG_yEfGrcGxGtlg_m80]--></g></svg>