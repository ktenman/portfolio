<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1106px" preserveAspectRatio="none" style="width:1765px;height:1106px;background:#FFFFFF;" version="1.1" viewBox="0 0 1765 1106" width="1765px" zoomAndPan="magnify"><title>Price Update Flow - Scheduled Job Execution</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="555.6611" x="605.7993" y="37.1182">Price Update Flow - Scheduled Job Execution</text><rect fill="#FFFFFF" height="967.144" style="stroke:#000000;stroke-width:1;" width="10" x="56.9009" y="94.752"/><rect fill="#FFFFFF" height="754.1509" style="stroke:#000000;stroke-width:1;" width="10" x="227.5234" y="132.3506"/><rect fill="#FFFFFF" height="724.3516" style="stroke:#000000;stroke-width:1;" width="10" x="409.5854" y="162.1499"/><rect fill="#FFFFFF" height="89.3979" style="stroke:#000000;stroke-width:1;" width="10" x="557.9771" y="381.5444"/><rect fill="#FFFFFF" height="303.3618" style="stroke:#000000;stroke-width:1;" width="10" x="700.1445" y="500.7417"/><rect fill="#FFFFFF" height="160.3652" style="stroke:#000000;stroke-width:1;" width="10" x="897.3003" y="555.3403"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1066.8389" y="267.3472"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1066.8389" y="744.5049"/><rect fill="#FFFFFF" height="470.1577" style="stroke:#000000;stroke-width:1;" width="1550.8066" x="139.249" y="341.9458"/><rect fill="#FFFFFF" height="199.9639" style="stroke:#000000;stroke-width:1;" width="807.9043" x="612.5811" y="515.7417"/><rect fill="#FFFFFF" height="92.7666" style="stroke:#000000;stroke-width:1;" width="595.5361" x="814.9492" y="615.939"/><rect fill="#FFFFFF" height="45.168" style="stroke:none;stroke-width:1;" width="595.5361" x="814.9492" y="663.5376"/><line style="stroke:#000000;stroke-width:1;" x1="61" x2="61" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="232.249" x2="232.249" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="413.7979" x2="413.7979" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="562.373" x2="562.373" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="704.5811" x2="704.5811" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="901.9492" x2="901.9492" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1071.6514" x2="1071.6514" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1349.6006" x2="1349.6006" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1469.4854" x2="1469.4854" y1="84.752" y2="1070.896"/><line style="stroke:#000000;stroke-width:1;" x1="1610.0166" x2="1610.0166" y1="84.752" y2="1070.896"/><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.8018" x="20" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.8018" x="27" y="73.8125">Scheduler</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.8018" x="20" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.8018" x="27" y="1090.9712">Scheduler</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="146.5488" x="159.249" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="132.5488" x="166.249" y="73.8125">FtDataRetrievalJob</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="146.5488" x="159.249" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="132.5488" x="166.249" y="1090.9712">FtDataRetrievalJob</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="157.5752" x="335.7979" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="143.5752" x="342.7979" y="73.8125">JobExecutionService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="157.5752" x="335.7979" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="143.5752" x="342.7979" y="1090.9712">JobExecutionService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.208" x="523.373" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.208" x="530.373" y="73.8125">FtService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.208" x="523.373" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.208" x="530.373" y="1090.9712">FtService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="145.127" x="632.5811" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.127" x="639.5811" y="73.8125">DataProcessingUtil</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="145.127" x="632.5811" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.127" x="639.5811" y="1090.9712">DataProcessingUtil</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.7021" x="834.9492" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.7021" x="841.9492" y="73.8125">DailyPriceService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.7021" x="834.9492" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.7021" x="841.9492" y="1090.9712">DailyPriceService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.375" x="999.6514" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.375" x="1006.6514" y="73.8125">InstrumentService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.375" x="999.6514" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.375" x="1006.6514" y="1090.9712">InstrumentService</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.8848" x="1310.6006" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.8848" x="1317.6006" y="73.8125">Database</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.8848" x="1310.6006" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.8848" x="1317.6006" y="1090.9712">Database</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.5313" x="1420.4854" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85.5313" x="1427.4854" y="73.8125">Redis Cache</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.5313" x="1420.4854" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85.5313" x="1427.4854" y="1090.9712">Redis Cache</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="120.0391" x="1550.0166" y="52.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.0391" x="1557.0166" y="73.8125">FT Markets API</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="120.0391" x="1550.0166" y="1069.896"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.0391" x="1557.0166" y="1090.9712">FT Markets API</text><rect fill="#FFFFFF" height="967.144" style="stroke:#000000;stroke-width:1;" width="10" x="56.9009" y="94.752"/><rect fill="#FFFFFF" height="754.1509" style="stroke:#000000;stroke-width:1;" width="10" x="227.5234" y="132.3506"/><rect fill="#FFFFFF" height="724.3516" style="stroke:#000000;stroke-width:1;" width="10" x="409.5854" y="162.1499"/><rect fill="#FFFFFF" height="89.3979" style="stroke:#000000;stroke-width:1;" width="10" x="557.9771" y="381.5444"/><rect fill="#FFFFFF" height="303.3618" style="stroke:#000000;stroke-width:1;" width="10" x="700.1445" y="500.7417"/><rect fill="#FFFFFF" height="160.3652" style="stroke:#000000;stroke-width:1;" width="10" x="897.3003" y="555.3403"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1066.8389" y="267.3472"/><rect fill="#FFFFFF" height="59.5986" style="stroke:#000000;stroke-width:1;" width="10" x="1066.8389" y="744.5049"/><polygon fill="#000000" points="215.5234,128.3506,225.5234,132.3506,215.5234,136.3506,219.5234,132.3506" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="66.9009" x2="221.5234" y1="132.3506" y2="132.3506"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.667" x="73.9009" y="111.8218">@Scheduled trigger</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.6226" x="73.9009" y="127.6211">(adaptive scheduling)</text><polygon fill="#000000" points="397.5854,158.1499,407.5854,162.1499,397.5854,166.1499,401.5854,162.1499" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="237.5234" x2="403.5854" y1="162.1499" y2="162.1499"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.4434" x="244.5234" y="157.4204">executeJob(this)</text><polygon fill="#000000" points="1338.543,203.7485,1348.543,207.7485,1338.543,211.7485,1342.543,207.7485" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="419.5854" x2="1344.543" y1="207.7485" y2="207.7485"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.1499" x="426.5854" y="187.2197">Create JobExecution record</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.3853" x="426.5854" y="203.019">(status: RUNNING)</text><polygon fill="#000000" points="248.5234,233.5479,238.5234,237.5479,248.5234,241.5479,244.5234,237.5479" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="242.5234" x2="408.5854" y1="237.5479" y2="237.5479"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.8545" x="254.5234" y="232.8184">execute()</text><polygon fill="#000000" points="1054.8389,263.3472,1064.8389,267.3472,1054.8389,271.3472,1058.8389,267.3472" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="237.5234" x2="1060.8389" y1="267.3472" y2="267.3472"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.6733" x="244.5234" y="262.6177">getAllInstruments()</text><polygon fill="#000000" points="1338.543,293.1465,1348.543,297.1465,1338.543,301.1465,1342.543,297.1465" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1076.8389" x2="1344.543" y1="297.1465" y2="297.1465"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.5273" x="1083.8389" y="292.417">SELECT * FROM instrument</text><polygon fill="#000000" points="1082.8389,322.9458,1072.8389,326.9458,1082.8389,330.9458,1078.8389,326.9458" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1076.8389" x2="1349.543" y1="326.9458" y2="326.9458"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="77.9746" x="1088.8389" y="322.2163">instruments</text><path d="M139.249,341.9458 L215.6318,341.9458 L215.6318,349.7451 L205.6318,359.7451 L139.249,359.7451 L139.249,341.9458 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="470.1577" style="stroke:#000000;stroke-width:1;" width="1550.8066" x="139.249" y="341.9458"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.3828" x="154.249" y="356.0156">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="152.7432" x="230.6318" y="355.0049">[for each FT instrument]</text><polygon fill="#000000" points="545.9771,377.5444,555.9771,381.5444,545.9771,385.5444,549.9771,381.5444" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="237.5234" x2="551.9771" y1="381.5444" y2="381.5444"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.0708" x="244.5234" y="376.8149">getHistoricalPrices(symbol)</text><polygon fill="#000000" points="1598.0361,407.3438,1608.0361,411.3438,1598.0361,415.3438,1602.0361,411.3438" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="567.9771" x2="1604.0361" y1="411.3438" y2="411.3438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="221.6855" x="574.9771" y="406.6143">GET /data/chart (HTML fragment)</text><polygon fill="#000000" points="578.9771,437.1431,568.9771,441.1431,578.9771,445.1431,574.9771,441.1431" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="572.9771" x2="1609.0361" y1="441.1431" y2="441.1431"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.6821" x="584.9771" y="436.4136">HTML price data</text><polygon fill="#000000" points="248.5234,466.9424,238.5234,470.9424,248.5234,474.9424,244.5234,470.9424" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="242.5234" x2="561.9771" y1="470.9424" y2="470.9424"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216.2837" x="254.5234" y="466.2129">Map&lt;LocalDate, DailyPriceData&gt;</text><polygon fill="#000000" points="688.1445,496.7417,698.1445,500.7417,688.1445,504.7417,692.1445,500.7417" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="237.5234" x2="694.1445" y1="500.7417" y2="500.7417"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="291.5859" x="244.5234" y="496.0122">processDailyData(instrument, dailyData, FT)</text><path d="M612.5811,515.7417 L688.9639,515.7417 L688.9639,523.541 L678.9639,533.541 L612.5811,533.541 L612.5811,515.7417 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="199.9639" style="stroke:#000000;stroke-width:1;" width="807.9043" x="612.5811" y="515.7417"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.3828" x="627.5811" y="529.8115">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.1284" x="703.9639" y="528.8008">[for each date in dailyData]</text><polygon fill="#000000" points="885.3003,551.3403,895.3003,555.3403,885.3003,559.3403,889.3003,555.3403" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="710.1445" x2="891.3003" y1="555.3403" y2="555.3403"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.1558" x="717.1445" y="550.6108">saveDailyPrice(dailyPrice)</text><polygon fill="#000000" points="1338.543,596.939,1348.543,600.939,1338.543,604.939,1342.543,600.939" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="907.3003" x2="1344.543" y1="600.939" y2="600.939"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.3945" x="914.3003" y="580.4102">Find existing price by</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.5024" x="914.3003" y="596.2095">(instrument_id, date, provider)</text><path d="M814.9492,615.939 L878.9985,615.939 L878.9985,623.7383 L868.9985,633.7383 L814.9492,633.7383 L814.9492,615.939 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="92.7666" style="stroke:#000000;stroke-width:1;" width="595.5361" x="814.9492" y="615.939"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="829.9492" y="630.0088">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="134.981" x="893.9985" y="628.998">[existing price found]</text><polygon fill="#000000" points="1338.543,651.5376,1348.543,655.5376,1338.543,659.5376,1342.543,655.5376" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="907.3003" x2="1344.543" y1="655.5376" y2="655.5376"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.791" x="914.3003" y="650.8081">UPDATE daily_price</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="814.9492" x2="1410.4854" y1="664.5376" y2="664.5376"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114.8071" x="819.9492" y="675.5967">[no existing price]</text><polygon fill="#000000" points="1338.543,696.7056,1348.543,700.7056,1338.543,704.7056,1342.543,700.7056" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="907.3003" x2="1344.543" y1="700.7056" y2="700.7056"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.6553" x="914.3003" y="695.9761">INSERT daily_price</text><polygon fill="#000000" points="1054.8389,740.5049,1064.8389,744.5049,1054.8389,748.5049,1058.8389,744.5049" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="710.1445" x2="1060.8389" y1="744.5049" y2="744.5049"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.5498" x="717.1445" y="739.7754">Update instrument.currentPrice</text><polygon fill="#000000" points="1338.543,770.3042,1348.543,774.3042,1338.543,778.3042,1342.543,774.3042" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1076.8389" x2="1344.543" y1="774.3042" y2="774.3042"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.7041" x="1083.8389" y="769.5747">UPDATE instrument SET current_price</text><polygon fill="#000000" points="1458.251,800.1035,1468.251,804.1035,1458.251,808.1035,1462.251,804.1035" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1071.8389" x2="1464.251" y1="804.1035" y2="804.1035"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.333" x="1078.8389" y="799.374">EVICT instrument cache</text><polygon fill="#000000" points="397.5854,836.9028,407.5854,840.9028,397.5854,844.9028,401.5854,840.9028" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="237.5234" x2="403.5854" y1="840.9028" y2="840.9028"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.1436" x="244.5234" y="836.1733">execution complete</text><polygon fill="#000000" points="1338.543,882.5015,1348.543,886.5015,1338.543,890.5015,1342.543,886.5015" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="414.5854" x2="1344.543" y1="886.5015" y2="886.5015"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.3223" x="421.5854" y="865.9727">Update JobExecution</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.3682" x="421.5854" y="881.772">(status: SUCCESS, end_time)</text><path d="M710,899.5015 L710,972.5015 L1083,972.5015 L1083,909.5015 L1073,899.5015 L710,899.5015 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1073,899.5015 L1073,909.5015 L1083,909.5015 L1073,899.5015 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.0459" x="716" y="917.5713">Upsert logic prevents duplicates:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="352.9614" x="716" y="933.3706">- Check if price exists for (instrument, date, provider)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.6123" x="716" y="949.1699">- Update if exists, insert if not</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="287.625" x="716" y="964.9692">- Database UNIQUE constraint as safety net</text><path d="M1475,982.6987 L1475,1055.6987 L1758,1055.6987 L1758,992.6987 L1748,982.6987 L1475,982.6987 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1748,982.6987 L1748,992.6987 L1758,992.6987 L1748,982.6987 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="227.1318" x="1481" y="1000.7686">Cache eviction ensures fresh data:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.6855" x="1481" y="1016.5679">- Instrument cache cleared on update</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="262.2598" x="1481" y="1032.3672">- Summary cache cleared on calculation</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="239.5669" x="1481" y="1048.1665">- TTL-based expiration for stale data</text><!--SRC=[VLPDazeu4BtxLtHoWXGaTzTMQgU8PuQj6PQ0oMchfeJT1YN2Saao6_xzjXhP5cPgEJ0UwNNtwzSVveCxuWcXKKBMYPDE8QoDB11sJIaSmgFI_y8SjiKHorPX2N_fFMI_iMYTr7MIDC8uMSX6r0u-TYZp4OG5s_rt2tfqtuGJ6tH6ubaeyiVedtf_YwEBFiuMpPb8TS0tUox6JcD8vUuHFkZQw0AjbVLXvwHYQ7CzqcQCbkh2GiH-6tzmxtfPMsVQ4zOt92ITlazZB-mLKevItc0fBIm42SVtXNyQ9Ph3gp2_q5buM2yP9HgP9A9mykmBDgZUFy7ygrSjXJ-7CfBwXmEQV-g9A4L3jhqbgJCTtFco9FGLVFY4Ka2k2rA59kuexIsSSqx2WpShAVB2eB-EQme62srAOc2TSArDORDRhPQhfsbipBn3lCcqfzA9cy81tODIGmdi9ABJrw1xwFXiivTiaSCdUDpy_SgmgtLIaliR_yETJKgyzvmehHkej06wF0BL9_86z0cCgu7lixHEKoi9nHrc9_PoscirPNWV8JInFwjwxbJh59wo7BxGT8elnP5w0oRF-UiBL4OSVD3Wff6SI1UM8To_u2rlt7OoluhcZnTDjAX9SGR33FYc_SecaGA1NvnZFqnfzyW-lFbaK6L63CBfZFGQfJqC99_VgbjUfHySCCP_UhChZp2dALXnnY6HITa_JdlJA7Gttf7RSDGrpgEiI-f7gY3DIH1qVw4c7l9xa-MCcSuygxCiqKJ1b1kRLxgjonxmRjJT-jj3dbtJVkFR7e_A8jHwvFJ_tIrNssoJl-ykeX8LUv2c0oLtgWyp4zuTWoIVYzOO-hlkOzqFaZyTZsd8Ut14Wvj3S1OnZ-ruQQQG_LWkubaCotIKrp36TmbtRSZ9SeFVhq2_nWfzQXGw7A-y84Ayyg9Tjzqj5jbsE_DQlZbvedwCedThzFOeIMfDJxIvZmvq5N44YcQHLe7I1rdG1PxzmeAoRHJj6OSs9SmS5aSiVe6iGkTnprWUhz5yZfjttjUq2bOphvqFIIT4Yp7Tomrsg-NtNKRIUAVqoyBnxm5HeRj0ZSvhwermd55N8tu50jAxb2N6shO6YIXzyH8GrtIMe-f2eL0OUhkHJSjy6RPjJoTXBlSOMdL5gmJ_al70F7-PU_v-mXjf-8BLeQgfi3Xxwly1]--></g></svg>