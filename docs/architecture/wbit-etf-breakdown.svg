<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="500" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">
    WBIT ETF Breakdown Architecture
  </text>

  <text x="500" y="55" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#666">
    WisdomTree Physical Bitcoin ETF Integration
  </text>

  <!-- User / UI Layer -->
  <g id="ui-layer">
    <rect x="50" y="100" width="200" height="100" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" rx="8"/>
    <text x="150" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      Vue.js UI
    </text>
    <text x="150" y="155" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      etf-breakdown.vue
    </text>
    <text x="150" y="175" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      Pie Chart Display
    </text>
  </g>

  <!-- API Gateway -->
  <g id="api-layer">
    <rect x="350" y="100" width="300" height="100" fill="#2196F3" stroke="#1565C0" stroke-width="2" rx="8"/>
    <text x="500" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      REST API Controller
    </text>
    <text x="500" y="155" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      EtfBreakdownController.kt
    </text>
    <text x="500" y="175" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      GET /api/etf-breakdown?symbol=WBIT
    </text>
  </g>

  <!-- Logo Service -->
  <g id="logo-layer">
    <rect x="750" y="100" width="200" height="100" fill="#FF9800" stroke="#E65100" stroke-width="2" rx="8"/>
    <text x="850" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      Logo Service
    </text>
    <text x="850" y="155" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      MinioService.kt
    </text>
    <text x="850" y="175" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      Auto-upload on access
    </text>
  </g>

  <!-- Service Layer -->
  <g id="service-layer">
    <rect x="350" y="280" width="300" height="120" fill="#9C27B0" stroke="#6A1B9A" stroke-width="2" rx="8"/>
    <text x="500" y="310" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      Business Logic
    </text>
    <text x="500" y="335" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      EtfBreakdownService.kt
    </text>
    <text x="500" y="360" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      1. Fetch EtfPositions
    </text>
    <text x="500" y="380" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      2. Aggregate by sector
    </text>
  </g>

  <!-- Database Layer -->
  <g id="database-layer">
    <!-- Instrument -->
    <rect x="100" y="480" width="180" height="100" fill="#607D8B" stroke="#37474F" stroke-width="2" rx="8"/>
    <text x="190" y="510" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      instrument
    </text>
    <text x="190" y="535" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      id: 9
    </text>
    <text x="190" y="555" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      symbol: WBIT:GER:EUR
    </text>

    <!-- EtfPosition -->
    <rect x="350" y="480" width="180" height="100" fill="#607D8B" stroke="#37474F" stroke-width="2" rx="8"/>
    <text x="440" y="510" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      etf_position
    </text>
    <text x="440" y="535" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      instrument_id: 9
    </text>
    <text x="440" y="555" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      etf_holding_id: X
    </text>

    <!-- EtfHolding -->
    <rect x="600" y="480" width="200" height="100" fill="#607D8B" stroke="#37474F" stroke-width="2" rx="8"/>
    <text x="700" y="505" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      etf_holding
    </text>
    <text x="700" y="525" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      ticker: BTC
    </text>
    <text x="700" y="542" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      weight: 100.0%
    </text>
    <text x="700" y="559" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      sector: CRYPTOCURRENCY
    </text>
    <text x="700" y="576" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      logo_url: bitcoin.png
    </text>
  </g>

  <!-- Response Flow -->
  <g id="response-flow">
    <rect x="100" y="650" width="700" height="100" fill="#FFF9C4" stroke="#F9A825" stroke-width="2" rx="8"/>
    <text x="450" y="680" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">
      API Response (JSON)
    </text>
    <text x="450" y="705" font-family="Courier New, monospace" font-size="11" text-anchor="middle" fill="#555">
      { "CRYPTOCURRENCY": { "weight": 100.0, "holdings": ["Bitcoin"] } }
    </text>
    <text x="450" y="730" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
      UI renders 100% Bitcoin pie chart with orange slice
    </text>
  </g>

  <!-- Arrows -->
  <!-- UI to API -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>

  <line x1="250" y1="150" x2="350" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="300" y="145" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">GET</text>

  <!-- API to Service -->
  <line x1="500" y1="200" x2="500" y2="280" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Service to Database -->
  <line x1="440" y1="400" x2="440" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Database relations -->
  <line x1="280" y1="530" x2="350" y2="530" stroke="#666" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="530" y1="530" x2="600" y2="530" stroke="#666" stroke-width="1.5" stroke-dasharray="5,5"/>

  <!-- Response back -->
  <line x1="500" y1="400" x2="450" y2="650" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Logo flow -->
  <line x1="750" y1="150" x2="700" y2="500" stroke="#FF9800" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="725" y="325" font-family="Arial, sans-serif" font-size="10" fill="#FF9800" transform="rotate(-20 725 325)">
    bitcoin.png
  </text>

  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="20" width="120" height="15" fill="#4CAF50" opacity="0.7"/>
    <text x="60" y="32" font-family="Arial, sans-serif" font-size="11" fill="white">Presentation</text>

    <rect x="180" y="20" width="120" height="15" fill="#2196F3" opacity="0.7"/>
    <text x="190" y="32" font-family="Arial, sans-serif" font-size="11" fill="white">API Layer</text>

    <rect x="310" y="20" width="120" height="15" fill="#9C27B0" opacity="0.7"/>
    <text x="320" y="32" font-family="Arial, sans-serif" font-size="11" fill="white">Business Logic</text>

    <rect x="440" y="20" width="120" height="15" fill="#607D8B" opacity="0.7"/>
    <text x="450" y="32" font-family="Arial, sans-serif" font-size="11" fill="white">Data Layer</text>

    <rect x="570" y="20" width="120" height="15" fill="#FF9800" opacity="0.7"/>
    <text x="580" y="32" font-family="Arial, sans-serif" font-size="11" fill="white">Storage</text>
  </g>

  <!-- Key Benefits Box -->
  <g id="benefits">
    <rect x="850" y="250" width="130" height="120" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2" rx="5"/>
    <text x="915" y="270" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2E7D32">
      Key Benefits
    </text>
    <text x="860" y="290" font-family="Arial, sans-serif" font-size="10" fill="#333">
      ✓ No code changes
    </text>
    <text x="860" y="310" font-family="Arial, sans-serif" font-size="10" fill="#333">
      ✓ Data-driven
    </text>
    <text x="860" y="330" font-family="Arial, sans-serif" font-size="10" fill="#333">
      ✓ Reuses existing
    </text>
    <text x="860" y="345" font-family="Arial, sans-serif" font-size="10" fill="#333">
      infrastructure
    </text>
    <text x="860" y="360" font-family="Arial, sans-serif" font-size="10" fill="#333">
      ✓ Single asset at
    </text>
    <text x="860" y="375" font-family="Arial, sans-serif" font-size="10" fill="#333">
      100% = Simple!
    </text>
  </g>
</svg>
